<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>山姆会员商店——购物车</title>
		<link rel="stylesheet" type="text/css" href="font_58s6xfeugmu6jemi/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="font_oex9o5u4t2/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="font_id8ly8ygl9/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="css/shoppingcar.css"></link>
	</head>
	<body>
		<div class="nav">
			<div class="nav_top">
				<div class="nav_top_login">
					下午好！山姆欢迎您！
					<a id="" href="#">登录</a>
					<a id="" href="#">注册</a>
				</div>
				<div class="nav_top_list">
					<ul id="nav_top_list_ul">
						<li>我的山姆<i class="iconfont">&#xe6a6;</i>
							<ul id="nav_top_list_1_ul">
								<li>link</li>
								<li>link</li>
								<li>link</li>
								<li>link</li>
								<li>link</li>
								<li>link</li>
							</ul>
						</li>
						<li>帮助中心<i class="iconfont">&#xe6a6;</i>
							<ul id="nav_top_list_2_ul">
								<li>link</li>
								<li>link</li>
								<li>link</li>
								<li>link</li>
								<li>link</li>
								
							</ul>
						</li>
						<li>快购工具<i class="iconfont">&#xe6a6;</i>
							<ul id="nav_top_list_3_ul">
								<li>link</li>
								<li>link</li>
								
							</ul>
						</li>
						<li>会籍介绍<i class="iconfont">&#xe6a6;</i>
							
						</li>
						<li>掌上山姆<i class="iconfont">&#xe6a6;</i>
							<ul id="nav_top_list_5_ul">
								
							</ul>
						</li>
						
					</ul>
				</div>
			</div>
			<div class="nav_mid">
				<img id="nav-mid-logo" src="img/nav-mid-logo.jpg" />
				<div id="address">
					<p><i class="iconfont">&#xe63f;</i></p>
					<p>上海市</p>
					<a href="#">切换地址</a>
				</div>
			</div>
			<div class="nav_bot">
				<ul class="nav-bot-list">
					<li id="navbot1"><a href="#">夏日换新</a>
						<div id="navbot1_list">	

						</div>
					</li>
						
					<li id="navbot2"><a href="#">生鲜食品</a>
						<div id="navbot2_list">	
							
						</div>
					</li>
					<li id="navbot3"><a href="#">粮油干货</a>
						<div id="navbot3_list">	
							
						</div>
					</li>
					<li id="navbot4"><a href="#">零食牛奶</a>
						<div id="navbot4_list">	
							
						</div>
					</li>
					<li id="navbot5"><a href="#">酒水饮料</a>
						<div id="navbot5_list">		
							
						</div>
					</li>
					<li id="navbot6"><a href="#">宝宝中心</a>
						<div id="navbot6_list">	
							
							
						</div>
					</li>
					<li id="navbot7"><a href="#">个护美妆</a>
						<div id="navbot7_list">
							
						</div>
					</li>
					<li id="navbot8"><a href="#">智能家电</a>
						<div id="navbot8_list">
							
						</div>
					</li>
					<li id="navbot9"><a href="#">手机数码</a>
						<div id="navbot9_list">
							
						</div>
					</li>
					<li id="navbot10"><a href="#">家居清洁</a>
						<div id="navbot10_list">	
							
						</div>
					</li>
					<li id="navbot11"><a href="#">床品箱包</a>
						<div id="navbot11_list">	
							
						</div>
					</li>
				</ul>
			</div>
		</div>
		<h2 id="shoppingcar_title">我的购物车</h2>
		<div id="shoppingcar_body">
			
			<table  cellspacing="0" width="1200" align="center" id="tab">
				<thead>
					<tr>
						<th width="200px">商品货号</th>
						<th width="200px">图片</th>
						<th width="200px">名称</th>
						<th width="200px">价格</th>
						<th width="200px">数量</th>
						<th width="200px">操作</th>
					</tr>
				</thead>
			<tbody>

			</tbody>
			</table>
			<a href="homepage.html">去购物</a>
		</div>
		<footer>
			<img id="footer_logo_1" src="img/footer-top-logo_03.jpg" />
			<img id="footer_logo_2" src="img/footer-bottom-logo_05.jpg" />
			<div id="footer_top"></div>
			<div id="footer_middle"></div>
			<div id="footer-bottom">
				<img src="img/footer-bottom_03.jpg" />
			</div>
			<div id="footer_connect">
				<dl>
					<dt><a href="#">新手指南</a></dt>
					<dd>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
					</dd>
				</dl>
				<dl>
					<dt><a href="#">新手指南</a></dt>
					<dd>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
					</dd>
				</dl>
				<dl>
					<dt><a href="#">新手指南</a></dt>
					<dd>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
					</dd>
				</dl>
				<dl>
					<dt><a href="#">新手指南</a></dt>
					<dd>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
					</dd>
				</dl>
				<dl>
					<dt><a href="#">新手指南</a></dt>
					<dd>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
					</dd>
				</dl>
				<dl>
					<dt><a href="#">新手指南</a></dt>
					<dd>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
						<a href="#">会籍介绍</a>
					</dd>
				</dl>
			</div>			
		</footer>
	</body>
	<script type="text/javascript" src="libs/jquery.js" charset="UTF-8"></script>
	<script type="text/javascript" src="libs/ajax.js" charset="UTF-8"></script>
	<script type="text/javascript" src="libs/jquery.cookie.js"></script>
	<script type="text/javascript" src="js/nav-bot-list.js" charset="UTF-8"></script>	
	<script type="text/javascript">
	class Car{
			constructor(options){
				this.body = options.tbody
				
				this.load()
			}
			load(){
				var that = this;
				$.ajax({
					url:"http://localhost/JiangMinYu/data/bestbuy01.json"
				}).then(function(res){
					that.res = res;
					that.getCookie();
					that.display();
					that.remove();
				},function(){
					
				})
			}
			getCookie(){
				this.goods = JSON.parse($.cookie("goods"));
			}
			display(){
				var that = this;
				var str = "";
				this.res.forEach(function(val1){
					that.goods.forEach(function(val2){
						if(val1.goodsId == val2.id){
							str += `<tr data-id="${val1.goodsId}">
										<td>${val1.goodsId}</td>
										<td><img src="${val1.src}"/></td>
										<td>${val1.name}</td>
										<td>${val1.price}</td>
										<td>${val2.num}</td>
										<td><span>删除</span></td>
									</tr>`
						}
					})
				})
				this.body.html(str)
			}
			remove(){
				var that = this;
				this.body.on("click","span",function(){
					var index = $(this).parent().parent().attr("data-id");
					for(var i=0;i<that.goods.length;i++){
						if(that.goods[i].id == parseInt(index)){
							break;
						}
					}
					
					that.goods.splice(i,1)
					
					var str = JSON.stringify(that.goods);
					$.cookie("goods",str)
					
					
					
					$(this).parent().parent().remove()
				})
			}
		}
		
		new Car({
			tbody:$("tbody")
		})	
		
		
	
//顶部栏鼠标移动效果！
$("#nav_top_list_ul").children("li").mouseover(
	function  () {
		$(this).css({background:"#004b8e",color:"white"}).children("ul").stop().slideDown(300);
	}
);
$("#nav_top_list_ul").children("li").mouseout(
	function  () {
		$(this).css({background:"",color:"#8fccf8"}).children("ul").stop().slideUp(300);
	}
);


//登录状态验证
if ($.cookie("user")) {
 	document.getElementsByClassName("nav_top_login")[0].innerHTML = "欢迎尊敬的会员朋友！"
}


//获取导航栏对象！
var onavbot = document.getElementsByClassName("nav_bot")[0];
var onavbot1 = document.getElementById("navbot1");
var onavbot2 = document.getElementById("navbot2");
var onavbot3 = document.getElementById("navbot3");
var onavbot4 = document.getElementById("navbot4");
var onavbot5 = document.getElementById("navbot5");
var onavbot6 = document.getElementById("navbot6");
var onavbot7 = document.getElementById("navbot7");
var onavbot8 = document.getElementById("navbot8");
var onavbot9 = document.getElementById("navbot9");
var onavbot10 = document.getElementById("navbot10");
var onavbot11 = document.getElementById("navbot11");


//导航栏鼠标移动事件！
function navbotmouse(obj,str){
	obj.onmouseover = function(){	
		obj.children[1].style.display = "block";
		obj.children[1].innerHTML = str;
		obj.classList.add("navactive");
		obj.children[0].style.color = "#004b8e";
	}
	obj.onmouseout = function () {
		obj.children[1].style.display = "none";
		obj.classList.remove("navactive");
		obj.children[0].style.color = "white";
	}
}
navbotmouse(onavbot1,navstr1);
navbotmouse(onavbot2,navstr2);
navbotmouse(onavbot3,navstr1);
navbotmouse(onavbot4,navstr4);
navbotmouse(onavbot5,navstr5);
navbotmouse(onavbot6,navstr1);
navbotmouse(onavbot7,navstr1);
navbotmouse(onavbot8,navstr4);
navbotmouse(onavbot9,navstr5);
navbotmouse(onavbot10,navstr10);
navbotmouse(onavbot11,navstr5);
	</script>
</html>
